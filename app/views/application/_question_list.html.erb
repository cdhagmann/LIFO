<main role="main">
  <div class="container">
    <div class="my-3 p-3 bg-white">
      <% questions.each do |question| %>
        <div class="media py-2 border-bottom border-danger ">
          <div class="d-flex justify-content-center align-items-center flex-column align-center text-center mx-3 h-100" style='width: 5%'>
            <% if question.has_accepted_answer? %>
              <div class='badge badge-success p-2 mt-1 mx-1'><%= question.answers.count.to_s %><br>
                <% if question.answers.count == 1 %>
                  <small>answer</small>
                <% else %>
                  <small>answers</small>
                <% end %>
              </div>
            <% else %>
              <div class='badge badge-primary p-2 mt-1 mx-1'><%= question.answers.count.to_s %><br>
                <% if question.answers.count == 1 %>
                  <small>answer</small>
                <% else %>
                  <small>answers</small>
                <% end %>
              </div>
            <% end %>
          </div>
          <div class='d-flex media-body'>
            <p class="media-body mb-0 pb-2">
              <strong class="d-inline text-gray-dark h2"><%= link_to question.title, question %></strong>

            </p>
            <div class="d-inline-flex justify-content-between align-items-end flex-column align-center">
              <% if current_user && (current_user.id == question.user_id || current_user.id == 1) %>
                <div class='d-flex'>
                  <%= link_to '<i class="fas fa-pen p-1"></i>'.html_safe, edit_question_path(question) %>
                  <%= link_to '<i class="fas fa-trash text-danger p-1"></i>'.html_safe, question, method: :delete, data: {confirm: 'Are you sure?'} %>
                </div>
              <% end %>
              <div class="border bg-light d-flex justify-content-around align-items-start mt-4 py-2 px-1 mb-1 ">
                <% if question.user.avatar.attached? %>
                  <%= image_tag(question.user.avatar, width: "40", class: "mr-2 py-1 px-1 ") %>
                <% end %>
                <div class='d-flex flex-column justify-content-end'>
                  <%= link_to '@' + question.user.username, question.user, :class => '' %>
                  <small>Last updated
                    <% if (Time.now - question.created_at).to_i < 60 %>
                      <%= (Time.now - question.created_at).to_i %> sec. ago
                    <% elsif (Time.now - question.created_at).to_i < 3600 %>
                      <%= (Time.now - question.created_at).to_i / 60 %> min. ago
                    <% elsif (Time.now - question.created_at).to_i < (3600 * 48) %>
                      <%= (Time.now - question.created_at).to_i / 3600 %> hr. ago
                    <% else %>
                      <%= (Time.now - question.created_at).to_i / (3600 * 24) %> days ago
                    <% end %></small>

                </div>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</main>